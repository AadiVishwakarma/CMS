<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="ISO-8859-1" />
    <title>Zee5 Content Dashboard</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>

    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />

    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
      integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
      crossorigin="anonymous"
    />
    
    <link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com//ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </head>
  <body>
    <div>
      <nav
        class="navbar navbar-expand-lg navbar-light"
        style="background-color: #e3f2fd"
      >
        <div class="container-fluid">
          <a class="navbar-brand" href="https://www.zee5.com/">
            <img
              src="https://upload.wikimedia.org/wikipedia/en/thumb/3/30/Zee5_Official_logo.svg/1200px-Zee5_Official_logo.svg.png"
              width="50"
              height="50"
              alt=""
            />
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  style="font-weight: bold"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Content Dashboard
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="navbarDropdownMenuLink"
                >
                  <li>
                    <a class="dropdown-item" th:href="@{/zee5dashboard}"
                      >Home</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      th:href="@{/zee5dashboard/toch-dashboard}"
                      >Toch Dashboard</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      th:href="@{/zee5dashboard/beforetv-filter}"
                      >Before TV filter</a
                    >
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      th:href="@{/zee5dashboard/beforetv-dash}"
                      >Before TV Dash</a
                    >
                  </li>
                </ul>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  style="font-weight: bold"
                  href="#"
                  th:href="@{/zee5dashboard/admin/admin-user}"
                  >Users</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  style="font-weight: bold"
                  href="https://www.zee5.com/privacypolicy"
                  >Video Summary</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  style="font-weight: bold"
                  th:href="@{/zee5dashboard/weeklywebisode}"
                  >Weekly Webisode</a
                >
              </li>

              <!-- <li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" style="font-weight: bold;" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
					  About
					</a>
					<ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
					  <li><a class="dropdown-item" href="https://www.zee5.com/aboutus">Zee5</a></li>
					  <li><a class="dropdown-item" href="https://docs.google.com/document/d/1Oj1AoNq3OePpnD8rdgt-kVoRH1M96LKZQE8wju_HK88/edit">Domains</a></li>
					  <li><a class="dropdown-item" href="https://www.zee5.com/termsofuse">Company T&C</a></li>
					</ul>
				  </li> -->
            </ul>
          </div>
        </div>
      </nav>
    </div>

    <!-- 
  <script>
$(document).ready(function () {

    (function ($) {

        $('#filter').keyup(function () {

            var rex = new RegExp($(this).val(), 'i');
            $('.searchable tr').hide();
            $('.searchable tr').filter(function () {
                return rex.test($(this).text());
            }).show();

        })

    }(jQuery));

});

</script>
   -->

    <script>
      function searchTable() {
        // Declare variables
        var input, filter, table, tr, td, i;
        input = document.getElementById("query_input");
        filter = input.value.toUpperCase();
        table = document.getElementById("usertable");
        tr = table.getElementsByTagName("tr");

        // Loop through all table rows, and hide those who don't match the search query
        for (i = 0; i < tr.length; i++) {
          td = tr[i].getElementsByTagName("td");
          for (j = 0; j < td.length; j++) {
            let tdata = td[j];
            if (tdata) {
              if (tdata.innerHTML.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
                break;
              } else {
                tr[i].style.display = "none";
              }
            }
          }
        }
      }
    </script>

    <h2 class="d-flex justify-content-left my-4 mx-5">Admin</h2>
    <div class="container my-2">
      <div class="">
        <a
          th:href="@{/zee5dashboard/admin/addNewUser}"
          class="btn btn-primary text-white btn-sm mb-3"
        >
          Add New</a
        >

        <!-- " class="btn btn-secondary text-white btn-sm mb-3" -->
        <button
          type="button"
          class="btn btn-secondary text-white btn-sm mb-3"
          data-bs-toggle="modal"
          data-bs-target="#infoModalHead"
        >
          Role Perks
        </button>
      </div>

      <div
        class="modal fade"
        id="infoModalHead"
        data-bs-backdrop="static"
        data-bs-keyboard="false"
        tabindex="-1"
        aria-labelledby="staticBackdropLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="infoModalHead">Access Level Perks</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true"></span>
              </button>
            </div>
            <div class="modal-body">
              <div class="m-list-timeline">
                <div class="m-list-timeline__items">
                  <div class="m-list-timeline__item">
                    <span
                      class="m-list-timeline__badge m-list-timeline__badge--danger"
                    ></span>
                    <span class="m-list-timeline__text"
                      >LEVEL 0 : <b>SUPER ADMIN !</b> Can do everything !</span
                    >
                  </div>
                  <div class="m-list-timeline__item">
                    <span
                      class="m-list-timeline__badge m-list-timeline__badge--success"
                    ></span>
                    <span class="m-list-timeline__text">LEVEL 1 </span>
                  </div>
                  <div class="m-list-timeline__item">
                    <span
                      class="m-list-timeline__badge m-list-timeline__badge--primary"
                    ></span>
                    <span class="m-list-timeline__text">LEVEL 2</span>
                  </div>
                  <div class="m-list-timeline__item">
                    <span
                      class="m-list-timeline__badge m-list-timeline__badge--warning"
                    ></span>
                    <span class="m-list-timeline__text">LEVEL 3</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="p-3">
        <form th:action="@{/zee5dashboard/admin/admin-user}" method="get">
          
              <div class="m-portlet__body">
                  <div class="form-group m-form__group mt-2 mb-2 col-md-6">
                  
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <button
                          class="btn btn-warning"
                          id="clearq"
                          type="button"
                          
                        >
                          Clear
                        </button>
                        
                      </div>
                      <input
                        type="text"
                        id="query_input"
                        class="form-control"
                        placeholder="Search for..."
                        value=""
                      />
                      
                      <div class="input-group-append">
                        <button
                          class="btn btn-success"
                          id="searchq"
                          type="button"
                          
                        > Search
                        </button>
                      </div>
                </div>
                  </div>
                  </div>
        </form>
      </div>

      <div id="usertable_wrapper" class="dataTables_wrapper dt-bootstrap4 no-footer">
        <table id="usertable" class = "table table-bordered  m-table m-table--head-bg-brand dataTable no-footer">
        <thead class="table-dark">
          <tr class="p-3 mb-2 bg-primary text-white">
            <th>#</th>
            <th>Name</th>
            <th>Level</th>
            <th>Email</th>
            <th class="col-md-3">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="userManagement : ${listUsers}">
            <td th:text="${userManagement.id}"></td>

            <td th:text="${userManagement.name}"></td>
            <td th:text="${userManagement.level}"></td>

            <td th:text="${userManagement.email}"></td>
            <td class="text-center">
              <!-- manage user access level -->

              <!-- 
                 <a  class="btn btn-primary btn-sm text-white" data-bs-toggle="modal" data-bs-target="#exampleModelLabel" >Update User Level</a>
                  -->

              <div
                class="modal fade"
                id="exampleModelLabel"
                data-bs-backdrop="static"
                data-bs-keyboard="false"
                tabindex="-1"
                aria-labelledby="exampleModelLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModelLabel">
                        Update User Role
                      </h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      >
                        <span aria-hidden="true"></span>
                      </button>
                    </div>

                    <div class="modal-body">
                      <form
                        th:action="@{/manageLevel/{id} (id=${userManagement.id})}"
                        th:object="${level}"
                        method="POST"
                        class="m-form m-form--fit m-form--label-align-right"
                      >
                        <div class="form-group m-form__group row">
                          <label class="col-lg-4 col-form-label">
                            User Role (Access Level):
                          </label>

                          <div class="col-lg-8 m-radio-inline">
                            <label
                              class="m-radio m-radio--check-bold m-radio--state-success"
                            >
                              <input
                                type="radio"
                                name="optradio"
                                th:value="1"
                              />
                              Level 1
                              <span></span>
                            </label>

                            <label
                              class="m-radio m-radio--check-bold m-radio--state-success"
                            >
                              <input
                                type="radio"
                                name="optradio"
                                th:value="2"
                              />
                              Level 2
                              <span></span>
                            </label>
                            <label
                              class="m-radio m-radio--check-bold m-radio--state-success"
                            >
                              <input
                                type="radio"
                                name="optradio"
                                th:value="3"
                              />
                              Level 3
                              <span></span>
                            </label>
                          </div>
                          <!--<input type="hidden" id="userid" value="11" name="userid" />-->
                        </div>

                        <div class="m-portlet__foot m-portlet__foot--fit">
                          <div class="m-form__actions m-form__actions">
                            <div class="form-group m-form__group row">
                              <div class="col-lg-12">
                                <button type="submit" class="btn btn-primary">
                                  Update
                                </button>

                                <!--                      
               <a th:href="@{/manageLevel}/{id} (id=${userManagement.level})}"
                class="btn btn-primary btn-sm refresh_status bg-primary text-white"
                >Update</a>
                -->
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Edit user  -->
              <a
                th:href="@{/zee5dashboard/admin/showFormForUpdate/{id}(id=${userManagement.id})}"
                class="btn btn-primary btn-sm"
                >Edit</a
              >

              <!-- Delete user details -->
              <a
                th:href="@{/zee5dashboard/admin/deleteUser/{id}(id=${userManagement.id})}"
                class="btn btn-danger btn-sm"
                >Delete</a
              >
            </td>
          </tr>
        </tbody>
      </table>
      </div>
    </div>

     <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript">
    
    $(document).ready(function () {
        // Setup - add a text input to each footer cell
        $('#usertable thead tr')
            
            .clone(true)
            
             $('#clearq').click(function() {
    	    table.search('').draw();
    	    $('#query_input').val('');
    	});
        
        
        
       
        var table = $('#usertable').DataTable({
        	pageLength:3, info: false,
        	lengthMenu: [ 1, 2, 3, 4],
        	lengthChange:false,
        	//bFilter: false,
            //orderCellsTop: true,
            fixedHeader: true,
            
                // For each column
        	
    
            //dom: '<"pull-left"f><"pull-left"l>tip',
            
                           
            
                
        })
        
        
        $('#searchq').click(function () {
            table.search($("#query_input").val()).draw();
        });

       
        
    });
        
    </script>
    <!-- 
    <script type="text/javascript">
    
    initComplete : function() {
        var input = $('.dataTables_filter input').unbind(),
            self = this.api(),
            $searchButton = $(`
                    <button
                    class="btn btn-success"
                    id="searchq"
                    type="button"
                    
                  >
                    Search
                  </button>
                `)
        .click(function() {
          self.search(input.val()).draw();
        })
        $('.dataTables_filter').append($searchButton);
    } 
    
    </script>
    -->
    
    <style>
    .dataTables_filter {
                display: none;
            }
    .pull-left{float:left!important;}
    
    </style>
	


    <style>
      footer {
        position: fixed;
        bottom: 0;
        width: 100%;
      }
      .text-white {
        text-decoration: none;
      }
      #foot {
        text-align: left;
      }
    </style>

    <footer class="bg-dark text-white">
      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
        <div class="clearfix">
          <a class="float-start text-white" th:href="@{/zee5dashboard}"
            >Zee5dashboard</a
          >
        </div>
        <!-- <a class="text-white" id="foot" th:href="@{zee5dashboard}">Zee5dashboard</a> -->
      </div>
      <!-- Copyright -->
    </footer>
  </body>
</html>
